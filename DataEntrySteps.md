# Входные данные этапа инициации (LogSentry / Mini‑SIEM)

Ниже приведены входные данные этапа инициации проекта в формате **5 пунктов** (как в шаблоне). Формулировки собраны и унифицированы на основе исходных материалов по направлениям сбора логов и хранилища/запросов, а также общих требований к MVP.

---

## 1. Запрос заказчика / инициатора

- Нужна лёгкая **mini‑SIEM‑система**, предназначенная для быстрого запуска **локально или в Docker** и наглядной демонстрации ценности мониторинга ИБ.
- Система должна работать **«из коробки»**: принимать логи (или демо‑генератор), превращать их в события, выполнять детектирование и показывать результат в интерфейсе.
- На старте фиксируется принцип: **без тяжёлой инфраструктуры**, без обязательного развёртывания сложных серверных компонентов и затратного администрирования.
- Сбор событий должен быть **tail‑подобным** (режим, близкий к реальному времени) и поддерживать **возобновление после перезапуска** без потери позиции чтения.

- Почему не берем «как у больших»
**Splunk** — классный enterprise-уровень, но у него **модель, завязанная на объём ingest/нагрузки**, и это обычно воспринимается как “дорого/избыточно” для маленьких сценариев (у Splunk даже калькуляторзавязан на GB ingested/day).  
Наша задача: сделать **“воткнул и работает”** без enterprise-цены и без тяжёлого внедрения.
---

## 2. Стратегические цели организации

- **Быстрая демонстрация ценности (Time‑to‑Value):** минимальное время от старта системы до появления первых инсайтов (графики, топы, алерты), включая режим демонстрации на тестовых данных.
- **Унификация данных:** разнородные логи приводятся к единой модели **Event**, чтобы правила детектирования и аналитика работали одинаково для разных источников.
- **Прозрачная цепочка доказательств:** от исходной строки лога → к нормализованному событию → к срабатыванию правила → к алерту → к связанным событиям и «первичке» (raw‑строкам).
- **Гибкость через конфигурацию:** управление источниками, правилами и порогами через централизованный `config.yaml` (валидация, дефолты), с возможностью быстро менять поведение детектов.
- **Готовая базовая аналитика:** простые агрегации и выдачи для дашборда (например, динамика 401/403, топ IP, фильтрация/поиск событий и алертов) без усложнения архитектуры.

---

## 3. Нормативные и правовые ограничения

- Система обрабатывает потенциально чувствительные данные: **IP‑адреса, учётные записи, сырые строки логов**, где могут встречаться токены/секреты. Требуется **минимизация данных** на ранних этапах (захват только необходимого; возможность фильтрации очевидно лишнего).
- Для расследования и воспроизводимости детектов важно хранить **исходную строку** (`raw`) **в неизменном виде** (без усечений), чтобы алерт можно было подтвердить первоисточником.
- Необходимо учитывать практику **retention/жизненного цикла данных**: локальное хранилище не должно бесконечно расти, должна быть политика хранения и очистки (например, параметризуемая через `config.yaml`).
- Доступ к логам и запуск сборщиков должен выполняться с **минимально необходимыми правами** (без избыточных привилегий).

---

## 4. Внешняя среда (рынок, регуляторы, контекст)

- Проект рассматривается как **внутренний/учебный инструмент** без сложной ролевой модели и «корпоративной» тяжеловесности на старте.
- Архитектурный контекст MVP: **монолитное приложение** + локальное хранилище; распределённый сбор через агентов и использование очередей сообщений в рамках первой версии не предусматриваются.
- Интерфейс ориентирован на быстрый просмотр результатов: веб‑дашборд с разделами обзора (графики/топы), алертов и поиска по событиям.
- Для корректной цепочки событий важно фиксировать точные **timestamp** (ожидаемая практика в логировании и аудите) и опираться на корректно настроенное системное время.

---

## 5. Допущения и ограничения (Assumptions & Constraints)

- **Окружение MVP:** достаточно ресурсов одного узла (локально/Docker) и локального доступа к файлам логов.
- **Функциональные рамки:** в первой версии не реализуются распределённые агенты, сложная межисточниковая корреляция «как в enterprise‑решениях», ML/аномалистика; детектирование строится на **правилах и порогах**.
- **Форматы данных:** предполагается соответствие логов типовым форматам (например, nginx combined, syslog‑подобные auth.log). Нестандартные форматы требуют отдельной доработки парсеров/нормализаторов.
- **Эффективность ингеста:** сбор должен быть ресурсно экономным и выдерживать демонстрационную нагрузку (в том числе поток от генератора логов).
- **Требования к хранилищу и конкурентности:** запись событий и чтение для дашборда должны работать параллельно; нужны индексы по ключевым полям и пакетная запись для снижения накладных расходов. Для восстановления после рестарта требуется хранение служебного состояния (позиции чтения/offset).

---
